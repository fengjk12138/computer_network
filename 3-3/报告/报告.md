# lab3-3 计算机网络
>冯杰康 1813402 计算机科学与技术专业
## 协议设计 

#### 数据设计
整体数据段设计和3-1相同，为了观察方便，在本次实验中将其整个数据段长度设置为250字节

#### 确认方式
本次实验依然使用累计确认，并且对于ack的设置和对于其余的设置和对于累计方式和3-2相同，之后使用滑动窗口对发送方数据包进行处理。

#### 拥塞控制
对于拥塞窗口我们使用了两个状态进行拥塞控制

- 状态一：慢启动状态，发送窗口初始设置为1，然后每次进行进行增加，即收到对方一个合格的ack之后，发送方会连续发送两个数据段过去。这样就可以模拟慢启动状态的指数增长，即每次发送窗口会增加一倍。
    - 如果期间有数据段包发生了超时重传，那么此时发送方应该进入，并且将下一轮的ssthresh设置为当前发送窗口的一半及cwnd/2，之后将cwnd设置为1，重新开始慢启动状态。
    - 如果当前发送窗口cwnd超过了ssthresh，则进入下一个状态———拥塞避免状态，将在下一点提及
    - 如果在当前出现了3个冗余ACK的情况，则计入另一个状态，快速回复状态。

- 状态二：拥塞避免状态，发送窗口初始为转移到这个状态时的样子，然后窗口的增长方式变为没个发送阶段增长1个MSS，即下一个完整的发送窗口将会比当前完整的发送窗口大1，进行线性增长，直到出现以下状况：
    - 出现某个包的超时事件，表明这个包已经丢失。并且后面的包也会丢失，因此我们需要进行强烈的拥塞控制，将ssthresh设置为cwnd/2，并且将cwnd设置为1，重新进入慢启动状态。
    - 如果出现了3次冗余ACK，则证明只有一个包丢失，其余后面的包到达发送方，因此状态将走到下一个状态——快速恢复状态

- 状态三：快速恢复状态：
    